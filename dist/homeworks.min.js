//================================================================================
// [homeworks-framework]
// version: 0.0.1
// update: 2016.01.26
//================================================================================

!function(){var a={},b={},c={};String.prototype.getFormat=function(a){var b=this;for(var c in a){var d=a[c];c=c.replace(/\\/gi,"\\\\").replace(/-/gi,"\\-");var e=new RegExp("{"+c+"}","gi");b=b.replace(e,d)}return b.toString()},Function.prototype.bind=function(a,b){try{var c="[data-{data-name}]",d=this;$(c.getFormat({"data-name":a})).each(function(){var c=$(this),e=c.data("pen"),f=c.data(a);return f===!1?!0:void("function"==typeof d&&("undefined"==typeof e?d.call(c,null,f,b):d.call(c,$(e),f,b)))})}catch(e){console.warn(e)}},function(d){function e(a,b){this.preference={$self:this,$super:a,$helper:null,_anim:!1,_bind:!1,_debug:!0,_init:!1,anim:{time:300,effect:"swing"},framework:"homeworks",prefix:"works",id:"",o:{$w:d(window),$d:d(document)},p:{},i:{},g:{}},this.preference.id=b,this.preference.g=c[b],this.preference.$helper=new f(a)}function f(a){var c=a;this.promise=function(a,d,e){return"function"==typeof a&&"number"==typeof d&&(e=d,d=a,a=c.data.id),b[c.data.framework+"."+a]=setTimeout(function(){try{delete b[c.data.framework+"."+a]}catch(e){c.data.$helper.log(e)}"function"==typeof d&&d()},e),b},this.invoke=function(a){if("undefined"!=typeof b[c.data.framework+"."+a])try{clearTimeout(b[c.data.framework+"."+a]),delete b[c.data.framework+"."+a]}catch(d){return!1}return!0},this.log=function(a,b){if(c.data._debug===!0){var d=a;"undefined"!=typeof b&&null!==b&&(d="["+b+"] "+d),console.warn(d)}},this.parseTemplate=function(a,b){var d=c.template[a];return d.getFormat(b)},this.bind=function(a,b,d,e){try{a.bind(b+"."+c.data.framework+"."+c.data.id,d),"undefined"!=typeof e&&e===!0&&this.triggerHandler(a,b)}catch(f){c.data.$helper.log(a)}},this.unbind=function(a,b){a.unbind(b+"."+c.data.framework+"."+c.data.id)},this.trigger=function(a,b){a.trigger(b+"."+c.data.framework+"."+c.data.id)},this.triggerHandler=function(a,b){a.triggerHandler(b+"."+c.data.framework+"."+c.data.id)}}function g(a,b){var f=this;this.init=b.init,this.method={init:this.init},this.template={},d.extend(this.method,b.method),d.extend(this.template,b.template),this.route=function(){if(0===arguments.length||"object"==typeof arguments[0])"object"==typeof arguments[0]&&d.extend(f.data.i,arguments[0]),f.data._init=!0,f.init.apply(f,[this].concat(Array.prototype.slice.call(arguments)));else if("string"==typeof arguments[0])try{f.data._init===!1&&(f.data._init=!0,f.method.init.apply(f,[this].concat(Array.prototype.slice.call(arguments)))),f.method[arguments[0]].apply(f,[this].concat(Array.prototype.slice.call(arguments,1)))}catch(a){console.warn(a)}else f.data.$helper.log("파라미터 유효성 경고")},"undefined"!=typeof b.options&&null!==b.options&&"undefined"==typeof c[a]&&(c[a]=b.options),"undefined"==typeof this.data&&(this.data=new e(this,a).preference),this.data._bind===!1&&(this.data._bind=!0,d.fn[this.data.id]=this.route)}a.modal=new g("modal",{init:function(a,b){var c=this,e=a.find("."+this.data.prefix+"-close");this.data._visible=!1,this.data.$helper.bind(this.data.o.$w,"resize",function(){a.css({left:(c.data.o.$w.width()-a.width())/2,top:(c.data.o.$w.height()-a.height())/2})},!0),this.data.$helper.bind(e,"click",function(b){b.preventDefault();d(this);a[c.data.id]("close")}),e.ripple()},method:{toggle:function(a){this.data._visible===!0?a[this.data.id]("close"):a[this.data.id]("open")},open:function(a){a.show(),this.data._visible=!0},close:function(a){a.hide(),this.data._visible=!1}},template:{overlay:'<div class="{framework}-{id}"></div>'}}),a.ripple=new g("ripple",{init:function(a,b){var c=this;a.addClass("btn-ripple"),-1!=d.inArray(this.data.i.theme,this.data.g.supportThemes)&&a.addClass("btn-ripple-"+this.data.i.theme),this.data.$helper.bind(a,"click",function(a){var b=d(this),e=d(c.data.$helper.parseTemplate("effect")),f=Math.min(b.width(),b.height()),g=Math.max(b.width(),b.height())/f*2,h={x:a.clientX-b.offset().left-f/2,y:a.clientY-b.offset().top-f/2};e.css({width:f,height:f,left:h.x,top:h.y}),e.appendTo(b),c.data.$helper.promise(function(){c.data.$helper.promise(function(){c.data.$helper.promise(function(){e.remove()},500),e.addClass("anim-end").css({opacity:0})},150),e.css({transform:"scale("+g+")",opacity:1})},50)})},method:{},template:{effect:'<div class="btn-ripple-effect"></div>'},options:{supportThemes:["light","dark"]}})}(jQuery),$(function(){(function(a,b){this.ripple({theme:b})}).bind("ripple"),function(a){this.bind("click",function(b){b.preventDefault(),b.stopPropagation(),a.hasClass("toggle-active")?($(document).unbind("click.profileHandler"),a.stop(!0,!0).fadeOut(300,function(){$(this).removeClass("toggle-active")})):a.stop(!0,!0).fadeIn(300,function(){$(document).unbind("click.profileHandler").bind("click.profileHandler",function(){$(document).unbind("click.profileHandler"),a.stop(!0,!0).fadeOut(300,function(){$(this).removeClass("toggle-active")})}),$(this).addClass("toggle-active")})})}.bind("profile"),function(a){this.bind("click",function(b){b.preventDefault(),a.modal("toggle")})}.bind("modal")})}();