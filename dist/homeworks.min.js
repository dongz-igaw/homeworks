//================================================================================
// [homeworks-framework]
// version: 0.0.1
// update: 2016.02.11
//================================================================================

!function(){var a={},b={},c={};String.prototype.getFormat=function(a){var b=this;for(var c in a){var d=a[c];c=c.replace(/\\/gi,"\\\\").replace(/-/gi,"\\-");var e=new RegExp("{"+c+"}","gi");b=b.replace(e,d)}return b.toString()},Function.prototype.hook=function(a,b){try{var c="[data-{data-name}]",d=this;$(c.getFormat({"data-name":a})).each(function(){var c=$(this),e=c.data("pen"),f=c.data(a);return f===!1?!0:void("function"==typeof d&&("undefined"==typeof e?d.call(c,null,f,b):d.call(c,$(e),f,b)))})}catch(e){console.warn(e)}},function(d){function e(a,b){this.preference={$self:this,$super:a,$helper:null,_anim:!1,_bind:!1,_debug:!0,_init:!1,anim:{time:300,effect:"swing"},framework:"homeworks",prefix:"works",id:"",o:{$w:d(window),$d:d(document)},p:{},i:{_init:!1},g:{}},this.preference.id=b,this.preference.g=c[b],this.preference.$helper=new f(a)}function f(a){var c=a;this.promise=function(a,d,e){return"function"==typeof a&&"number"==typeof d&&(e=d,d=a,a=c.data.id),b[c.data.framework+"."+a]=setTimeout(function(){try{delete b[c.data.framework+"."+a]}catch(e){c.data.$helper.log(e)}"function"==typeof d&&d()},e),b},this.invoke=function(a){if("undefined"!=typeof b[c.data.framework+"."+a])try{clearTimeout(b[c.data.framework+"."+a]),delete b[c.data.framework+"."+a]}catch(d){return!1}return!0},this.log=function(a,b){if(c.data._debug===!0){var d=a;"undefined"!=typeof b&&null!==b&&(d="["+b+"] "+d),console.warn(d)}},this.parseTemplate=function(a,b){var d=c.template[a];return d.getFormat(b)},this.bind=function(a,b,d,e){try{var f=b.toString().split(" ");for(var g in f)f[g]=f[g]+"."+c.data.framework+"."+c.data.id;f=f.join(" "),a.bind(f,d),"undefined"!=typeof e&&e===!0&&this.triggerHandler(a,b)}catch(h){c.data.$helper.log(a)}},this.unbind=function(a,b){a.unbind(b+"."+c.data.framework+"."+c.data.id)},this.trigger=function(a,b){a.trigger(b+"."+c.data.framework+"."+c.data.id)},this.triggerHandler=function(a,b){var d=b.toString().split(" ")[0];a.triggerHandler(d+"."+c.data.framework+"."+c.data.id)}}function g(a,b){var f=this;this.init=b.init,this.method={init:this.init},this.template={},d.extend(this.method,b.method),d.extend(this.template,b.template),this.route=function(){var a=arguments;this.each(function(){if("undefined"==typeof this.data&&(this.data={}),"undefined"==typeof this.data[f.data.id]&&(this.data[f.data.id]={}),0===a.length||"object"==typeof a[0])return"object"==typeof a[0]&&(f.data.i=this.data[f.data.id],d.extend(f.data.i,a[0]),this.data[f.data.id]=f.data.i),"undefined"==typeof this.data[f.data.id]._init||this.data[f.data.id]._init===!1?(f.data.i._init=!0,this.data[f.data.id]._init=f.data.i,f.init.apply(f,[d(this)].concat(Array.prototype.slice.call(a)))):f;if("string"==typeof a[0])try{return"undefined"==typeof this.data[f.data.id]._init||this.data[f.data.id]._init===!1?(f.data.i._init=!0,this.data[f.data.id]._init=f.data.i,f.method.init.apply(f,[d(this)].concat(Array.prototype.slice.call(a)))):f.method[a[0]].apply(f,[d(this)].concat(Array.prototype.slice.call(a,1)))}catch(b){console.warn(b)}else f.data.$helper.log("파라미터 유효성 경고")})},"undefined"!=typeof b.options&&null!==b.options&&"undefined"==typeof c[a]&&(c[a]=b.options),"undefined"==typeof this.data&&(this.data=new e(this,a).preference),this.data._bind===!1&&(this.data._bind=!0,d.fn[this.data.id]=this.route)}a.modal=new g("modal",{init:function(a,b){var c=this,e=a.find("."+this.data.prefix+"-close");this.data._visible=!1,this.data.$helper.bind(this.data.o.$w,"resize",function(){a.css({left:(c.data.o.$w.width()-a.width())/2,top:(c.data.o.$w.height()-a.height())/2})},!0),this.data.$helper.bind(e,"click",function(b){b.preventDefault();d(this);a[c.data.id]("close")}),e.ripple()},method:{toggle:function(a){this.data._visible===!0?a[this.data.id]("close"):a[this.data.id]("open")},open:function(a){a.show(),this.data._visible=!0},close:function(a){a.hide(),this.data._visible=!1}},template:{overlay:'<div class="{framework}-{id}"></div>'}}),a.ripple=new g("ripple",{init:function(a,b){var c=this;return a.each(function(){var a=d(this);a.addClass("btn-ripple"),-1!=d.inArray(c.data.i.theme,c.data.g.supportThemes)&&a.addClass("btn-ripple-"+c.data.i.theme),c.data.$helper.bind(a,"click",function(a){var b=d(this),e=d(c.data.$helper.parseTemplate("effect")),f=Math.min(b.width(),b.height()),g=Math.max(b.width(),b.height())/f*2,h={x:a.clientX-b.offset().left-f/2,y:a.clientY-b.offset().top-f/2};e.css({width:f,height:f,left:h.x,top:h.y}),e.appendTo(b),c.data.$helper.promise(function(){c.data.$helper.promise(function(){c.data.$helper.promise(function(){e.remove()},500),e.addClass("anim-end").css({opacity:0})},150),e.css({transform:"scale("+g+")",opacity:1})},50)})})},method:{},template:{effect:'<div class="btn-ripple-effect"></div>'},options:{supportThemes:["light","dark"]}}),a.tooltip=new g("tooltip",{init:function(a,b){var c=this,e={type:"toggle",margin:20,direction:"left"};d.extend(e,b),a.each(function(){var a=d(this);""===a.data("title")&&a.data("title",a.attr("title")||""),(null===e.type||""===e.type||-1===d.inArray(e.type,c.data.g.supportThemes))&&(e.type="show");var b=d(c.data.$helper.parseTemplate("tooltip",{content:a.data("title")}));""!==a.data("header")&&b.find(".works-tooltip-header").remove();var f={top:a.offset().top,left:a.offset().left};b.appendTo("body"),"left"==e.direction?f.left-=b.outerWidth()+e.margin:"top"==e.direction?f.top-=b.outerHeight()+e.margin:"right"==e.direction?f.left+=a.width()+e.margin:"bottom"==e.direction&&(f.top+=a.height()+e.margin),b.css({left:f.left,top:f.top}),"show"==e.type||"queue"==e.type})},method:{show:function(){$tooltip.addClass("active"),_this.data.$helper.promise(function(){$tooltip.addClass("animate-in")},25)},queue:function(){}},template:{tooltip:'<div class="works-tooltip"><div class="works-tooltip-header">{title}</div><div class="works-tooltip-body">{content}</div><span class="works-tooltip-arrow"></span></div>'},options:{supportTypes:["toogle","show","hide"]}}),a.input=new g("input",{init:function(a,b){var c=this,e=[37,38,39,40,9,13,17,46],f=!1,g=null;a.each(function(){var a=d(this);a.hasClass("input-number")?c.data.$helper.bind(a,"keydown keyup",function(a){setTimeout(function(){if("keyup"==a.type&&17==a.keyCode){f=!0;try{clearTimeout(g)}catch(b){}setTimeout(function(){f=!1},150)}if(-1==d.inArray(a.keyCode,e)&&("undefined"==typeof a.ctrlKey||a.ctrlKey===!1)&&f===!1){var c=0,h=b[0].value.length;if(b[0].selectionStart||"0"==b[0].selectionStart)c=b[0].selectionStart;else{var i=document.selection.createRange();i.moveStart("character",-b[0].value.length),c=i.text.length}var j=b.val();"undefined"!=typeof j&&null!==j&&(j=j.toString().split(".")[0]),j=j.toString().replace(/[^\d]*/gi,"").replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),b.val(j);var k=Math.max(0,j.length-h);if(c+=k,b[0].selectionStart||"0"==b[0].selectionStart)b[0].setSelectionRange(c,c);else if("undefined"!=b[0].createTextRange){var l=b[0].createTextRange();l.move("character",c),l.select()}a.isTrigger||b.triggerHandler("change")}},25)},!0):a.hasClass("input-datetime")||a.hasClass("input-decimal")})}}),a.fileupload=new g("fileupload",{init:function(a,b){var c=this;d(a).bind("change",function(){var a=d(this);""!==a.val()&&c.method.upload.apply(c,[].concat(a,b,Array.prototype.slice.call(arguments,2)))})},method:{upload:function(a,b){var c=a[0].files[0],e={name:c.name,size:c.size,type:c.type.split("/")[c.type.split("/").length-1],exts:c.name.split(".")[c.name.split(".").length-1]},f={txt:["TXT","LOG"],img:["JPEG","JPG","JPE","PJPEG","PNG","GIF","BMP","RAW"],doc:["DOC","DOCX","PPT","PPTX","HWP","XLS","XLSX","PDF","CSV"],flag:{txt:"T",img:"I",doc:"D",spread:"S"}};if("undefined"!=typeof b&&"undefined"!=typeof b.type&&null!==b.type)if(-1!=d.inArray(b.type,Object.keys(f)))if(-1!=d.inArray(e.type.toUpperCase(),f[b.type]))if(-1!=d.inArray(e.exts.toUpperCase(),f[b.type])){var g=new FormData;if(g.append("file",c,c.name),"undefined"!=typeof b.type&&null!==b.type&&g.append("type",f.flag[b.type]),"undefined"!=typeof b.data)for(var h in b.data)g.append(h,b.data[h]);a.siblings(".btn").text("업로드 중").addClass("btn-default").removeClass("btn-success btn-danger"),d.ajax({url:b.url,data:g,type:"POST",contentType:!1,processData:!1,mimeType:"multipart/form-data",dataType:"json",timeout:3e4,complete:b.complete,success:function(c,d,e){if(200==c.code){var f=c.data;a.val(""),"img"==b.type?(a.siblings(".btn, img").remove(),a.before('<img src="'+f.data+'" />')):a.siblings(".btn").text("완료").removeClass("btn-default btn-danger").addClass("btn-success"),a.data("value",c.data),"function"==typeof b.success&&b.success.apply(this,Array.prototype.slice.call(arguments))}else"undefined"!=typeof c.data.msg&&alert(c.data.msg)},error:function(a,c,d){alert("업로드 요청 도중 에러가 발생했습니다.\r\n잠시 후 다시 시도해주세요."),d.siblings(".btn").text("에러").removeClass("btn-default btn-success").addClass("btn-danger"),"function"==typeof b.error&&b.error.apply(this,Array.prototype.slice.call(arguments))}})}else alert("."+e.exts+"은 업로드를 지원하는 확장자가 아닙니다.");else alert("."+e.exts+"은 업로드를 지원하는 확장자가 아닙니다.");else alert(b.type+"은 허용하는 확장자 옵션 정의가 아닙니다.")}}})}(jQuery),$(function(){(function(a,b){this.ripple({theme:b})}).hook("ripple"),function(a,b){var c=$(".works-wrapper"),d=$(".works-sider");this.bind("click",function(a){$(this);d.hasClass("works-sider-active")?(d.removeClass("works-sider-active"),c.removeClass("works-sider-active")):(d.addClass("works-sider-active"),c.addClass("works-sider-active"))})}.hook("menu"),function(a){this.bind("click",function(b){b.preventDefault(),a.modal("toggle")})}.hook("modal"),function(a,b){this.tooltip({type:b})}.hook("tooltip")})}();