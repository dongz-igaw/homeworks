{"version":3,"sources":["../../../../src/js/components/converter/core.js"],"names":["define","data","helper","method","model","$","init","element","context","preventKeyCode","ctrlLock","ctrlTimer","each","$this","hasClass","$helper","bind","event","setTimeout","type","keyCode","clearTimeout","console","trace","stack","inArray","ctrlKey","selectPosition","oldLength","value","length","selectionStart","document","selection","createRange","ran","moveStart","text","val","toString","split","replace","diffLength","Math","max","setSelectionRange","createTextRange","cursor","move","select","isTrigger","triggerHandler","jQuery"],"mappings":"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","file":"core.js","sourcesContent":["define([\r\n    '../../core/utils/data',\r\n    '../../core/utils/helper',\r\n    '../../core/utils/method',\r\n    '../../core/models/index'\r\n], (data, helper, method, model) => {\r\n    (function($) {\r\n        new method('converter', {\r\n            init: function (element) {\r\n                var context = this;\r\n\r\n                var preventKeyCode = [37, 38, 39, 40, 9, 13, 17, 46];\r\n                var ctrlLock = false;\r\n                var ctrlTimer = null;\r\n\r\n                element.each(function () {\r\n                    var $this = $(this);\r\n                    if ($this.hasClass('input-number')) {\r\n                        context.$helper.bind($this, 'keydown keyup', function (event) {\r\n                            setTimeout(function () {\r\n                                if (event.type === 'keyup' && event.keyCode === 17) {\r\n                                    ctrlLock = true;\r\n                                    try {\r\n                                        clearTimeout(ctrlTimer);\r\n                                    } catch ($this) {\r\n                                        console.trace($this.stack);\r\n                                    }\r\n                                    setTimeout(function () {\r\n                                        ctrlLock = false;\r\n                                    }, 150);\r\n                                }\r\n\r\n                                if (\r\n                                    $.inArray(event.keyCode, preventKeyCode) === -1 &&\r\n                                    ctrlLock === false &&\r\n                                    (\r\n                                        typeof event.ctrlKey === 'undefined' ||\r\n                                        event.ctrlKey === false\r\n                                    )\r\n                                ) {\r\n                                    var selectPosition = 0;\r\n                                    var oldLength = $this[0].value.length;\r\n                                    if ($this[0].selectionStart || $this[0].selectionStart === 0) {\r\n                                        selectPosition = $this[0].selectionStart;\r\n                                    } else if(document.selection && document.selection.createRange) {\r\n                                        var ran = document.selection.createRange();\r\n                                        ran.moveStart('character', -$this[0].value.length);\r\n                                        selectPosition = ran.text.length;\r\n                                    }\r\n\r\n                                    var value = $this.val();\r\n                                    if (typeof value !== 'undefined' && value !== null) {\r\n                                        value = (value.toString().split('.'))[0];\r\n                                    }\r\n                                    value = value.toString().replace(/[^\\d]*/gi, '').replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\r\n                                    $this.val(value);\r\n\r\n                                    var diffLength = Math.max(0, value.length - oldLength);\r\n                                    selectPosition += diffLength;\r\n\r\n                                    if ($this[0].selectionStart || $this[0].selectionStart === 0) {\r\n                                        $this[0].setSelectionRange(selectPosition, selectPosition);\r\n                                    } else if ($this[0].createTextRange !== 'undefined') {\r\n                                        var cursor = $this[0].createTextRange();\r\n                                        cursor.move('character', selectPosition);\r\n                                        cursor.select();\r\n                                    }\r\n\r\n                                    if (!event.isTrigger) {\r\n                                        $this.triggerHandler('change');\r\n                                    }\r\n                                }\r\n                            }, 25);\r\n                        }, true);\r\n                    } else if ($this.hasClass('input-datetime')) {\r\n                        // Write some codes here.\r\n                    } else if ($this.hasClass('input-decimal')) {\r\n                        // Write some codes here.\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }(jQuery));\r\n});"]}